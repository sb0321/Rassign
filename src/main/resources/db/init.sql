-- CREATE DATABASE testdb;

CREATE TABLE MEMBER (
	memberID VARCHAR(255) NOT NULL PRIMARY KEY,
	password VARCHAR(255) NOT NULL,
	nickname VARCHAR(255) NOT NULL
);

CREATE TABLE BOARD (
	boardID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	title VARCHAR(255) NOT NULL,
	content TEXT
);

CREATE TABLE FILE (
	fileID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	path VARCHAR(255) NOT NULL,
	originalName VARCHAR(255) NOT NULL,
	UUID VARCHAR(255) NOT NULL
);

-- 관계 테이블 생성

CREATE TABLE WRITE (
	memberID VARCHAR(255),
	boardID INT,
	createdDate DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',
	updatedDate DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',
	
	FOREIGN KEY (memberID)
	REFERENCES MEMBER(memberID) on UPDATE CASCADE,
	
	FOREIGN KEY (boardID)
	REFERENCES BOARD(boardID) on UPDATE CASCADE
);

CREATE TABLE SAVE (
	boardID INT,
	fileID INT,
	
	FOREIGN KEY (boardID)
	REFERENCES BOARD(boardID) on UPDATE CASCADE,
	
	FOREIGN KEY (fileID)
	REFERENCES FILE(fileID) on UPDATE CASCADE
);
